<!-- ######################### app.component.html - krok 1 ######################### -->

<section class="container">
    <nav>
        <span><strong>Recipe Manager</strong></span>
        <ul>
            <!-- dyrektywa Angulara, która ustawia trasę na odpowiedni widok. -->
            <li><a routerLink="/recipes">Lista Przepisów</a></li>
            <li><a routerLink="/recipe/add">Dodaj Nowy Przepis</a></li>
        </ul>
    </nav>
    <main>
        <!-- miejsce w szablonie, gdzie Angular Router ładuje komponenty zależnie od bieżącej ścieżki. -->
        <router-outlet></router-outlet>
    </main>
    <footer>
        &reg;Angular - poziom podstawowy
    </footer>
</section>

<!-- ######################### ######################### -->

<!-- ######################### recipe-list.component.html - krok 3 ######################### -->

<div class="container">
    @for (recipe of recipes; track recipe) {
    <mat-card class="recipe-card">
        <mat-card-title>{{ recipe.title }}</mat-card-title>
        <mat-card-content>
            <p><strong>Składniki:</strong>{{ recipe.ingredients.join(', ')
                }}</p>
        </mat-card-content>
        <mat-card-actions>
            <button mat-button color="primary"
                [routerLink]="[' /recipe', recipe.id]">Zobacz
                szczegóły</button>
            <button mat-button color="accent"
                [routerLink]="['/recipe/edit', recipe.id]">Edytuj</button>
            <button mat-button color="warn"
                (click)="onDeleteRecipe(recipe?.id)">Usuń</button>
        </mat-card-actions>
    </mat-card>
    }
</div>

<!-- ######################### ######################### -->

<!-- ######################### recipe-details-component.html - krok 4 ######################### -->

@if (recipe) {
<mat-card>
    <mat-card-title>{{ recipe.title }}</mat-card-title>
    <mat-card-content>
        <p><strong>Składniki:</strong> {{ recipe.ingredients.join(', ')
            }}</p>
        <p><strong>Opis:</strong> {{ recipe.description }}</p>
    </mat-card-content>
    <mat-card-actions>
        <button mat-button color="accent"
            [routerLink]="['/recipe/edit', recipe.id]">Edytuj</button>
        <button mat-button color="primary" routerLink="/recipes">Powrót do
            listy</button>
    </mat-card-actions>
</mat-card>
}

<!-- ######################### ######################### -->

<!-- ######################### recipe-reactive-form-component.html - krok 5 ######################### -->

<mat-card class="form-card">
    <mat-card-title>{{ recipeFormGroup.get('title')?.value ? 'Edytuj Przepis' :
        'Dodaj Nowy Przepis' }}</mat-card-title>
    <form [formGroup]="recipeFormGroup" (ngSubmit)="onSubmit()">
        <!-- Tytuł przepisu -->
        <mat-form-field class="form-control-full-width">
            <mat-label>Tytuł przepisu</mat-label>
            <input matInput type="text" formControlName="title" />
            @if (recipeFormGroup.get('title')?.hasError('required')) {
            <mat-error>
                Tytuł jest wymagany
            </mat-error>
            }
            @if (recipeFormGroup.get('title')?.hasError('minlength')) {
            <mat-error>
                Tytuł musi mieć co najmniej 3 znaki
            </mat-error>
            }
        </mat-form-field>

        <!-- Opis przepisu -->
        <mat-form-field class="form-control-full-width">
            <mat-label>Opis: </mat-label>
            <textarea matInput
                cdkTextareaAutosize
                #autosize="cdkTextareaAutosize"
                cdkAutosizeMinRows="1"
                cdkAutosizeMaxRows="5" type="text"
                formControlName="description"></textarea>
            @if (recipeFormGroup.get('description')?.errors?.required) {
            <mat-error>
                Składniki są wymagane
            </mat-error>
            }
        </mat-form-field>

        <!-- Składniki -->
        <mat-form-field>
            <mat-label>Składniki (minimum 2):</mat-label>
            <mat-select
                formControlName="ingredients" multiple>
                @for (popularIngredient of popularIngredients; track
                popularIngredient) {
                <mat-option
                    [value]="popularIngredient">{{popularIngredient}}</mat-option>
                }</mat-select>
            @if (recipeFormGroup.get('ingredients')?.errors?.required) {
            <mat-error>Składniki
                są wymagane
            </mat-error>
            }
        </mat-form-field>

        <!-- Poziom trudności -->
        <mat-form-field class="form-control-full-width">
            <mat-label>Poziom trudności wykonania :</mat-label>
            <select matNativeControl required formControlName="difficulty">
                <option value="hard">hard</option>
                <option value="medium">medium</option>
                <option value="easy">easy</option>
            </select>
        </mat-form-field>

        <!-- Czas przygotowania -->
        <mat-form-field>
            <mat-label>Czas wykonania (w minutach):</mat-label>
            <input matInput type="text"
                formControlName="preparationTime" />
            @if (recipeFormGroup.get('preparationTime')?.errors?.required) {
            <mat-error>Czas
                wykonania jest wymagany
            </mat-error>
            }
        </mat-form-field>

        <button mat-raised-button color="primary" type="submit"
            [disabled]="recipeFormGroup.invalid">Zapisz</button>
        <button mat-button color="warn" type="button"
            routerLink="/recipes">Anuluj</button>
    </form>
</mat-card>

<!-- ######################### ######################### -->